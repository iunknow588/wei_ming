import lunarInfo from"../const/lunarInfo";import solarMonth from"../const/solarMonth";import gan from"../const/gan";import zhi from"../const/zhi";import animals from"../const/animals";import lunarTerm from"../const/lunarTerm";import lTermInfo from"../const/lTermInfo";import nStr1 from"../const/nStr1";import nStr2 from"../const/nStr2";import nStr3 from"../const/nStr3";import nStr4 from"../const/nStr4";const solarLunar={lunarInfo:lunarInfo,solarMonth:solarMonth,gan:gan,zhi:zhi,animals:animals,lunarTerm:lunarTerm,lTermInfo:lTermInfo,nStr1:nStr1,nStr2:nStr2,nStr3:nStr3,nStr4:nStr4,lYearDays:function(r){var a,n=348;for(a=32768;a>8;a>>=1)n+=solarLunar.lunarInfo[r-1900]&a?1:0;return n+solarLunar.leapDays(r)},leapMonth:function(r){return 15&solarLunar.lunarInfo[r-1900]},leapDays:function(r){return solarLunar.leapMonth(r)?65536&solarLunar.lunarInfo[r-1900]?30:29:0},monthDays:function(r,a){return a>12||a<1?-1:solarLunar.lunarInfo[r-1900]&65536>>a?30:29},solarDays:function(r,a){if(a>12||a<1)return-1;var n=a-1;return 1==n?r%4==0&&r%100!=0||r%400==0?29:28:solarLunar.solarMonth[n]},toGanZhi:function(r){return solarLunar.gan[r%10]+solarLunar.zhi[r%12]},getTerm:function(r,a){if(r<1900||r>2100)return-1;if(a<1||a>24)return-1;var n=solarLunar.lTermInfo[r-1900],t=[parseInt("0x"+n.substr(0,5)).toString(),parseInt("0x"+n.substr(5,5)).toString(),parseInt("0x"+n.substr(10,5)).toString(),parseInt("0x"+n.substr(15,5)).toString(),parseInt("0x"+n.substr(20,5)).toString(),parseInt("0x"+n.substr(25,5)).toString()],o=[t[0].substr(0,1),t[0].substr(1,2),t[0].substr(3,1),t[0].substr(4,2),t[1].substr(0,1),t[1].substr(1,2),t[1].substr(3,1),t[1].substr(4,2),t[2].substr(0,1),t[2].substr(1,2),t[2].substr(3,1),t[2].substr(4,2),t[3].substr(0,1),t[3].substr(1,2),t[3].substr(3,1),t[3].substr(4,2),t[4].substr(0,1),t[4].substr(1,2),t[4].substr(3,1),t[4].substr(4,2),t[5].substr(0,1),t[5].substr(1,2),t[5].substr(3,1),t[5].substr(4,2)];return parseInt(o[a-1])},toChinaYear:function(r){var a=parseInt(r/1e3),n=parseInt(r%1e3/100),t=parseInt(r%100/10),o=r%10;return solarLunar.nStr4[a]+solarLunar.nStr4[n]+solarLunar.nStr4[t]+solarLunar.nStr4[o]+"年"},toChinaMonth:function(r){if(r>12||r<1)return-1;var a=solarLunar.nStr3[r-1];return a+="月"},toChinaDay:function(r){var a;switch(r){case 10:a="初十";break;case 20:a="二十";break;case 30:a="三十";break;default:a=solarLunar.nStr2[Math.floor(r/10)],a+=solarLunar.nStr1[r%10]}return a},getAnimal:function(r){return solarLunar.animals[(r-4)%12]},solar2lunar:function(r,a,n){if(r<1900||r>2100)return-1;if(1900==r&&1==a&&n<31)return-1;if(r)t=new Date(r,parseInt(a)-1,n);else var t=new Date;var o,s=0,e=(r=t.getFullYear(),a=t.getMonth()+1,n=t.getDate(),(Date.UTC(t.getFullYear(),t.getMonth(),t.getDate())-Date.UTC(1900,0,31))/864e5);for(o=1900;o<2101&&e>0;o++)e-=s=solarLunar.lYearDays(o);e<0&&(e+=s,o--);var u=new Date,l=!1;u.getFullYear()==r&&u.getMonth()+1==a&&u.getDate()==n&&(l=!0);var i=t.getDay(),f=solarLunar.nStr1[i];0==i&&(i=7);var m=o,L=solarLunar.leapMonth(o),h=!1;for(o=1;o<13&&e>0;o++)L>0&&o==L+1&&0==h?(--o,h=!0,s=solarLunar.leapDays(m)):s=solarLunar.monthDays(m,o),1==h&&o==L+1&&(h=!1),e-=s;0==e&&L>0&&o==L+1&&(h?h=!1:(h=!0,--o)),e<0&&(e+=s,--o);var g=o,p=e+1,b=a-1,c=solarLunar.getTerm(r,3),D=solarLunar.toGanZhi(r-4),S=new Date(r,1,c).getTime();new Date(r,b,n).getTime()<S&&(D=solarLunar.toGanZhi(r-5));var T=solarLunar.getTerm(r,2*a-1),I=solarLunar.getTerm(r,2*a),y=solarLunar.toGanZhi(12*(r-1900)+a+11);n>=T&&(y=solarLunar.toGanZhi(12*(r-1900)+a+12));var v=!1,M="";T==n&&(v=!0,M=solarLunar.lunarTerm[2*a-2]),I==n&&(v=!0,M=solarLunar.lunarTerm[2*a-1]);var C=Date.UTC(r,b,1,0,0,0,0)/864e5+25567+10,Y=solarLunar.toGanZhi(C+n-1);return{lYear:m,lMonth:g,lDay:p,animal:solarLunar.getAnimal(m),yearCn:solarLunar.toChinaYear(m),monthCn:(h&&L===g?"闰":"")+solarLunar.toChinaMonth(g),dayCn:solarLunar.toChinaDay(p),cYear:r,cMonth:a,cDay:n,gzYear:D,gzMonth:y,gzDay:Y,isToday:l,isLeap:h,nWeek:i,ncWeek:"星期"+f,isTerm:v,term:M}},lunar2solar:function(r,a,n,t){var o=solarLunar.leapMonth(r);solarLunar.leapDays(r);if(t&&o!=a)return-1;if(2100==r&&12==a&&n>1||1900==r&&1==a&&n<31)return-1;var s=solarLunar.monthDays(r,a);if(r<1900||r>2100||n>s)return-1;for(var e=0,u=1900;u<r;u++)e+=solarLunar.lYearDays(u);var l=0,i=!1;for(u=1;u<a;u++)l=solarLunar.leapMonth(r),i||l<=u&&l>0&&(e+=solarLunar.leapDays(r),i=!0),e+=solarLunar.monthDays(r,u);t&&(e+=s);var f=Date.UTC(1900,1,30,0,0,0),m=new Date(864e5*(e+n-31)+f),L=m.getUTCFullYear(),h=m.getUTCMonth()+1,g=m.getUTCDate();return solarLunar.solar2lunar(L,h,g)}};export default solarLunar;
//# sourceMappingURL=solarLunar.js.map